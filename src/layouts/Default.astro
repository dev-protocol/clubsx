---
import type { ClubsConfiguration } from '@devprotocol/clubs-core'
import VercelAnalytics from '@components/Analytics/VercelAnalytics.astro'
import PreviewBanner from '@components/PreviewBanner/PreviewBanner.svelte'
import type { DraftOptions } from '@constants/draft'
import Footer from '@components/Footer/Footer.astro'

const { config, footer = true } = Astro.props as {
  config?: ClubsConfiguration
  footer?: boolean
}

const draftOptions = config?.options?.find((option) => option.key === '__draft')
  ?.value as DraftOptions['value']
const isInDraft = Boolean(draftOptions?.isInDraft)
---

<slot />
{isInDraft && <PreviewBanner />}
{footer && <Footer />}
<VercelAnalytics />
