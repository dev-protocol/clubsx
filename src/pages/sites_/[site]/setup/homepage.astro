---
import AdminHomeForm from '@components/AdminHomeForm/AdminHomeForm.svelte'
import type { HomeConfig } from '../../../../constants/homeConfig'
import { config as _config } from '@fixtures/config'
import { adminFactory } from '@devprotocol/clubs-core'
import home from '@plugins/home'
import SetupLayout from '@layouts/Setup.astro'

const { site } = Astro.params

const { getCurrentConfig } = adminFactory({
  config: async () => await _config(site),
  plugins: {
    home,
  },
})

const config = await getCurrentConfig()

const initHomeConfig: HomeConfig = {
  hero: {
    image: '',
    text: '',
  },
  whatWeDo: {
    text: '',
    images: [],
  },
  perks: {
    headerText: '',
    subText: '',
    images: [],
  },
  quote: '',
  body: '',
}
---

<SetupLayout {config} setupStep="DESIGN">
  <AdminHomeForm
    client:only="svelte"
    homeConfig={initHomeConfig}
    currentPluginIndex={0}
  />
</SetupLayout>
